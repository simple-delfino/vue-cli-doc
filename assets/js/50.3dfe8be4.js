(window.webpackJsonp=window.webpackJsonp||[]).push([[50],{416:function(s,e,t){"use strict";t.r(e);var a=t(46),n=Object(a.a)({},(function(){var s=this,e=s.$createElement,t=s._self._c||e;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"vue-cli-plugin-pwa"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#vue-cli-plugin-pwa"}},[s._v("#")]),s._v(" @vue/cli-plugin-pwa")]),s._v(" "),t("blockquote",[t("p",[s._v("Плагин pwa для vue-cli")])]),s._v(" "),t("p",[s._v("Добавляемый этим плагином service worker включается только в production окружении (к примеру, только при запуске сборки через "),t("code",[s._v("npm run build")]),s._v(" или "),t("code",[s._v("yarn build")]),s._v("). Использование service worker при разработке не рекомендуется, так как может привести к ситуации, когда используются кэшированные ранее ресурсы и не учитываются последние локальные изменения.")]),s._v(" "),t("p",[s._v("Вместо этого в режиме разработки добавляется файл "),t("code",[s._v("noopServiceWorker.js")]),s._v(". Этот файл service worker является эффективным 'no-op', который сбрасывает любые другие service worker, зарегистрированные ранее для такой же комбинации host:port.")]),s._v(" "),t("p",[s._v("При необходимости протестировать service worker локально, соберите приложение и запустите простой HTTP-сервер из каталога сборки. Рекомендуется использовать браузер в инкогнито-режиме для избежания осложнений с кэшем вашего браузера.")]),s._v(" "),t("h2",{attrs:{id:"конфигурация"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#конфигурация"}},[s._v("#")]),s._v(" Конфигурация")]),s._v(" "),t("p",[s._v("Конфигурация осуществляется через свойство "),t("code",[s._v("pwa")]),s._v(" в файле "),t("code",[s._v("vue.config.js")]),s._v(", или через поле "),t("code",[s._v('"vue"')]),s._v(" в файле "),t("code",[s._v("package.json")]),s._v(".")]),s._v(" "),t("ul",[t("li",[t("p",[t("strong",[s._v("pwa.workboxPluginMode")])]),s._v(" "),t("p",[s._v("Выбор один из двух режимов, поддерживаемых используемым "),t("a",{attrs:{href:"https://developers.google.com/web/tools/workbox/modules/workbox-webpack-plugin",target:"_blank",rel:"noopener noreferrer"}},[t("code",[s._v("workbox-webpack-plugin")]),t("OutboundLink")],1),s._v(".")]),s._v(" "),t("ul",[t("li",[t("p",[t("code",[s._v("'GenerateSW'")]),s._v(" (по умолчанию) создание нового файла service worker каждый раз при пересборке приложения.")])]),s._v(" "),t("li",[t("p",[t("code",[s._v("'InjectManifest'")]),s._v(" использование существующего файла service worker и создание копии этого файла с внедрённым в него «precache manifest».")])])]),s._v(" "),t("p",[s._v("Руководство «"),t("a",{attrs:{href:"https://developers.google.com/web/tools/workbox/modules/workbox-webpack-plugin#which_plugin_to_use",target:"_blank",rel:"noopener noreferrer"}},[s._v("Какой плагин использовать?"),t("OutboundLink")],1),s._v("» поможет выбрать один из двух режимов.")])]),s._v(" "),t("li",[t("p",[t("strong",[s._v("pwa.workboxOptions")])]),s._v(" "),t("p",[s._v("Настройки, передаваемые в используемый "),t("code",[s._v("workbox-webpack-plugin")]),s._v(".")]),s._v(" "),t("p",[s._v("При использовании шаблона App Shell в режиме "),t("code",[s._v("GenerateSW")]),s._v(" можно настроить точку входа таким образом, чтобы убедиться, что все страницы загружаются в оффлайне:")]),s._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[s._v("navigateFallback"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'index.html'")]),s._v("\n")])])]),t("p",[s._v("Для получения дополнительной информации о поддерживаемых значениях обратитесь к руководству для "),t("a",{attrs:{href:"https://developers.google.com/web/tools/workbox/modules/workbox-webpack-plugin#full_generatesw_config",target:"_blank",rel:"noopener noreferrer"}},[t("code",[s._v("GenerateSW")]),t("OutboundLink")],1),s._v(" или для "),t("a",{attrs:{href:"https://developers.google.com/web/tools/workbox/modules/workbox-webpack-plugin#full_injectmanifest_config",target:"_blank",rel:"noopener noreferrer"}},[t("code",[s._v("InjectManifest")]),t("OutboundLink")],1),s._v(".")])]),s._v(" "),t("li",[t("p",[t("strong",[s._v("pwa.name")])]),s._v(" "),t("ul",[t("li",[t("p",[s._v('По умолчанию: поле "name" в файле '),t("code",[s._v("package.json")])]),s._v(" "),t("p",[s._v("Используется в качестве значения мета-тега "),t("code",[s._v("apple-mobile-web-app-title")]),s._v(" в сгенерированном HTML. Обратите внимание, необходимо отредактировать файл "),t("code",[s._v("public/manifest.json")]),s._v(" для соответствия этому значению.")])])])]),s._v(" "),t("li",[t("p",[t("strong",[s._v("pwa.themeColor")])]),s._v(" "),t("ul",[t("li",[s._v("По умолчанию: "),t("code",[s._v("'#4DBA87'")])])])]),s._v(" "),t("li",[t("p",[t("strong",[s._v("pwa.msTileColor")])]),s._v(" "),t("ul",[t("li",[s._v("По умолчанию: "),t("code",[s._v("'#000000'")])])])]),s._v(" "),t("li",[t("p",[t("strong",[s._v("pwa.appleMobileWebAppCapable")])]),s._v(" "),t("ul",[t("li",[t("p",[s._v("По умолчанию: "),t("code",[s._v("'no'")])]),s._v(" "),t("p",[s._v("По умолчанию значение "),t("code",[s._v("'no'")]),s._v(", потому что iOS до версии 11.3 не имела надлежащей поддержки PWA. См. "),t("a",{attrs:{href:"https://medium.com/@firt/dont-use-ios-web-app-meta-tag-irresponsibly-in-your-progressive-web-apps-85d70f4438cb",target:"_blank",rel:"noopener noreferrer"}},[s._v("эту статью"),t("OutboundLink")],1),s._v(" для более подробной информации.")])])])]),s._v(" "),t("li",[t("p",[t("strong",[s._v("pwa.appleMobileWebAppStatusBarStyle")])]),s._v(" "),t("ul",[t("li",[s._v("По умолчанию: "),t("code",[s._v("'default'")])])])]),s._v(" "),t("li",[t("p",[t("strong",[s._v("pwa.assetsVersion")])]),s._v(" "),t("ul",[t("li",[t("p",[s._v("По умолчанию: "),t("code",[s._v("''")])]),s._v(" "),t("p",[s._v("Эта опция используется, если необходимо добавить версию к иконкам и манифесту для игнорирования кэша браузера. В результате добавится "),t("code",[s._v("?v=<pwa.assetsVersion>")]),s._v(" к URL-адресам иконок и манифеста.")])])])]),s._v(" "),t("li",[t("p",[t("strong",[s._v("pwa.manifestPath")])]),s._v(" "),t("ul",[t("li",[t("p",[s._v("По умолчанию: "),t("code",[s._v("'manifest.json'")])]),s._v(" "),t("p",[s._v("Путь к манифесту приложения. Если в качестве пути указан URL, то плагин не будет во время сборки генерировать manifest.json в каталоге dist.")])])])]),s._v(" "),t("li",[t("p",[t("strong",[s._v("pwa.manifestOptions")])]),s._v(" "),t("ul",[t("li",[t("p",[s._v("По умолчанию: "),t("code",[s._v("{}")])]),s._v(" "),t("p",[s._v("Объект будет использоваться для генерации "),t("code",[s._v("manifest.json")])]),s._v(" "),t("p",[s._v("Если не определить следующие значения в объекте, то вместо них будут использованы значения опции "),t("code",[s._v("pwa")]),s._v(" или значения по умолчанию.")]),s._v(" "),t("ul",[t("li",[s._v("name: "),t("code",[s._v("pwa.name")])]),s._v(" "),t("li",[s._v("short_name: "),t("code",[s._v("pwa.name")])]),s._v(" "),t("li",[s._v("start_url: "),t("code",[s._v("'.'")])]),s._v(" "),t("li",[s._v("display: "),t("code",[s._v("'standalone'")])]),s._v(" "),t("li",[s._v("theme_color: "),t("code",[s._v("pwa.themeColor")])]),s._v(" "),t("li",[s._v("icons: "),t("code",[s._v("[ { 'src': './img/icons/android-chrome-192x192.png', 'sizes': '192x192', 'type': 'image/png' }, { 'src': './img/icons/android-chrome-512x512.png', 'sizes': '512x512', 'type': 'image/png' }, { 'src': './img/icons/android-chrome-maskable-192x192.png', 'sizes': '192x192', 'type': 'image/png', 'purpose': 'maskable' }, { 'src': './img/icons/android-chrome-maskable-512x512.png', 'sizes': '512x512', 'type': 'image/png', 'purpose': 'maskable' } ]")])])])])])]),s._v(" "),t("li",[t("p",[t("strong",[s._v("pwa.manifestCrossorigin")])]),s._v(" "),t("ul",[t("li",[t("p",[s._v("По умолчанию: "),t("code",[s._v("undefined")])]),s._v(" "),t("p",[s._v("Значение атрибута "),t("code",[s._v("crossorigin")]),s._v(" в теге ссылки на манифест в сгенерированном HTML. Это значение может потребоваться установить, когда PWA находится за аутентифицированным прокси-сервером. Для более подробной информации смотрите "),t("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/HTML/Element/link#attr-crossorigin",target:"_blank",rel:"noopener noreferrer"}},[s._v("варианты значений cross-origin"),t("OutboundLink")],1),s._v(".")])])])]),s._v(" "),t("li",[t("p",[t("strong",[s._v("pwa.iconPaths")])]),s._v(" "),t("ul",[t("li",[t("p",[s._v("По умолчанию:")]),s._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  favicon32"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'img/icons/favicon-32x32.png'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  favicon16"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'img/icons/favicon-16x16.png'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  appleTouchIcon"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'img/icons/apple-touch-icon-152x152.png'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  maskIcon"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'img/icons/safari-pinned-tab.svg'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  msTileImage"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'img/icons/msapplication-icon-144x144.png'")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),t("p",[s._v("Измените эти значения при необходимости использовать различные пути для иконок. Начиная с версии 4.3.0, можно указывать "),t("code",[s._v("null")]),s._v(" в качестве значения, чтобы не включать эту иконку.")]),s._v(" "),t("p",[t("em",[s._v("ПРИМЕЧАНИЕ:")]),s._v(" Эти иконки используются только для генерации мета-тегов в "),t("code",[s._v("<head>")]),s._v(" HTML-документа. Для изменения пути к иконкам в манифесте используйте "),t("code",[s._v("pwa.manifestOptions.icons")])])])])])]),s._v(" "),t("h3",{attrs:{id:"пример-конфигурации"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#пример-конфигурации"}},[s._v("#")]),s._v(" Пример конфигурации")]),s._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// Файл vue.config.js")]),s._v("\nmodule"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("exports "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ...настройки других vue-cli плагинов...")]),s._v("\n  pwa"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    name"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'My App'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    themeColor"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'#4DBA87'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    msTileColor"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'#000000'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    appleMobileWebAppCapable"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'yes'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    appleMobileWebAppStatusBarStyle"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'black'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// настройки манифеста")]),s._v("\n    manifestOptions"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      display"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'landscape'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      background_color"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'#42B883'")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ...другие настройки манифеста...")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// настройка workbox-плагина")]),s._v("\n    workboxPluginMode"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'InjectManifest'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    workboxOptions"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// swSrc необходимо в режиме InjectManifest")]),s._v("\n      swSrc"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'dev/sw.js'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ...другие настройки Workbox...")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),t("h2",{attrs:{id:"установка-в-уже-созданный-проект"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#установка-в-уже-созданный-проект"}},[s._v("#")]),s._v(" Установка в уже созданный проект")]),s._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("vue "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" pwa\n")])])]),t("h2",{attrs:{id:"внедряемые-правиnа-webpack-chain"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#внедряемые-правиnа-webpack-chain"}},[s._v("#")]),s._v(" Внедряемые правила webpack-chain")]),s._v(" "),t("ul",[t("li",[t("code",[s._v("config.plugin('workbox')")])])])])}),[],!1,null,null,null);e.default=n.exports}}]);