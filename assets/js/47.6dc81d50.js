(window.webpackJsonp=window.webpackJsonp||[]).push([[47],{414:function(e,t,s){"use strict";s.r(t);var a=s(46),r=Object(a.a)({},(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[s("h1",{attrs:{id:"vue-cli-plugin-e2e-nightwatch"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#vue-cli-plugin-e2e-nightwatch"}},[e._v("#")]),e._v(" @vue/cli-plugin-e2e-nightwatch")]),e._v(" "),s("blockquote",[s("p",[e._v("Плагин e2e-nightwatch для vue-cli")])]),e._v(" "),s("h2",{attrs:{id:"внедряемые-команды"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#внедряемые-команды"}},[e._v("#")]),e._v(" Внедряемые команды")]),e._v(" "),s("ul",[s("li",[s("p",[s("strong",[s("code",[e._v("vue-cli-service test:e2e")])])]),e._v(" "),s("p",[e._v("Запускает E2E тесты с помощью "),s("a",{attrs:{href:"https://nightwatchjs.org",target:"_blank",rel:"noopener noreferrer"}},[e._v("Nightwatch.js"),s("OutboundLink")],1),e._v(".")]),e._v(" "),s("p",[e._v("Опции:")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("--url          запуск E2E-тестов по указанному URL, вместо авто-запуска сервера\n--config       использовать пользовательский файл конфигурации nightwatch (перезаписывает внутренние настройки)\n--headless     использовать chrome или firefox в headless-режиме\n--parallel     использовать параллельный режим через test workers (доступно только в chromedriver)\n--use-selenium использовать сервер Selenium вместо chromedriver или geckodriver\n-e, --env      окружения браузеров через запятую для тестирования (по умолчанию: chrome)\n-t, --test     запустить тест по указанному пути к файлу\n-f, --filter   glob для фильтрации тестов по имени файла\n")])])]),s("p",[s("a",{attrs:{href:"https://nightwatchjs.org/guide/running-tests/#command-line-options",target:"_blank",rel:"noopener noreferrer"}},[e._v("Поддерживаются все опции Nightwatch CLI"),s("OutboundLink")],1),e._v(". Например: "),s("code",[e._v("--verbose")]),e._v(", "),s("code",[e._v("--retries")]),e._v(" и т.д.")])])]),e._v(" "),s("h2",{attrs:{id:"структура-проекта"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#структура-проекта"}},[e._v("#")]),e._v(" Структура проекта")]),e._v(" "),s("p",[e._v("При установке плагина генерируется следующая структура каталогов. В ней будут примеры для большинства концептов тестирования доступных в Nightwatch.")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("tests/e2e/\n  ├── custom-assertions/\n  |   └── elementCount.js\n  ├── custom-commands/\n  |   ├── customExecute.js\n  |   ├── openHomepage.js\n  |   └── openHomepageClass.js\n  ├── page-objects/\n  |   └── homepage.js\n  ├── specs/\n  |   ├── test.js\n  |   └── test-with-pageobjects.js\n  └── globals.js\n")])])]),s("h4",{attrs:{id:"specs"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#specs"}},[e._v("#")]),e._v(" "),s("code",[e._v("specs")])]),e._v(" "),s("p",[e._v("Основное место расположения тестов. Может содержать вложенные каталоги, которые можно выбирать при запуске с помощью аргумента "),s("code",[e._v("--group")]),e._v(". "),s("a",{attrs:{href:"https://nightwatchjs.org/guide/running-tests/#test-groups",target:"_blank",rel:"noopener noreferrer"}},[e._v("Подробнее"),s("OutboundLink")],1),e._v(".")]),e._v(" "),s("h4",{attrs:{id:"custom-assertions"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#custom-assertions"}},[e._v("#")]),e._v(" "),s("code",[e._v("custom-assertions")])]),e._v(" "),s("p",[e._v("Расположенные здесь файлы будут автоматически загружаться Nightwatch и добавляться в API "),s("code",[e._v(".assert")]),e._v(" и "),s("code",[e._v(".verify")]),e._v(" для расширения встроенных методов утверждений Nightwatch. Подробнее в документации "),s("a",{attrs:{href:"https://nightwatchjs.org/guide/extending-nightwatch/#writing-custom-assertions",target:"_blank",rel:"noopener noreferrer"}},[e._v("по созданию пользовательских утверждений"),s("OutboundLink")],1),e._v(".")]),e._v(" "),s("h4",{attrs:{id:"custom-commands"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#custom-commands"}},[e._v("#")]),e._v(" "),s("code",[e._v("custom-commands")])]),e._v(" "),s("p",[e._v("Расположенные здесь файлы будут автоматически загружаться Nightwatch и добавляться в API объекта "),s("code",[e._v("browser")]),e._v(" для расширения встроенных команд Nightwatch. Подробнее в документации "),s("a",{attrs:{href:"https://nightwatchjs.org/guide/extending-nightwatch/#writing-custom-commands",target:"_blank",rel:"noopener noreferrer"}},[e._v("по созданию пользовательских команд"),s("OutboundLink")],1),e._v(".")]),e._v(" "),s("h4",{attrs:{id:"page-objects"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#page-objects"}},[e._v("#")]),e._v(" "),s("code",[e._v("page objects")])]),e._v(" "),s("p",[e._v("Работа с объектами страниц — популярная методология в E2E-тестировании UI. Расположенные здесь файлы будут автоматически добавляться в API "),s("code",[e._v(".page")]),e._v(", при этом имя файла определит имя объекта страницы. Подробнее в документации "),s("a",{attrs:{href:"https://nightwatchjs.org/guide/working-with-page-objects/",target:"_blank",rel:"noopener noreferrer"}},[e._v("по работе с объектами страниц"),s("OutboundLink")],1),e._v(".")]),e._v(" "),s("h4",{attrs:{id:"globals-js"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#globals-js"}},[e._v("#")]),e._v(" "),s("code",[e._v("globals.js")])]),e._v(" "),s("p",[e._v("Файл внешних глобальных переменных, который может содержать глобальные свойства или хуки. Подробнее в документации "),s("a",{attrs:{href:"https://nightwatchjs.org/gettingstarted/configuration/#test-globals",target:"_blank",rel:"noopener noreferrer"}},[e._v("по глобальным свойствам тестов"),s("OutboundLink")],1),e._v(".")]),e._v(" "),s("h2",{attrs:{id:"установка-в-уже-созданный-проект"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#установка-в-уже-созданный-проект"}},[e._v("#")]),e._v(" Установка в уже созданный проект")]),e._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[e._v("vue "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("add")]),e._v(" e2e-nightwatch\n")])])]),s("h2",{attrs:{id:"конфигурация"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#конфигурация"}},[e._v("#")]),e._v(" Конфигурация")]),e._v(" "),s("p",[e._v("Nightwatch предварительно сконфигурирован для запуска в Chrome по умолчанию. Доступен также Firefox через "),s("code",[e._v("--env firefox")]),e._v(". При необходимости запускать end-to-end тесты в других браузерах (например, Safari, Microsoft Edge), нужно добавить "),s("code",[e._v("nightwatch.conf.js")]),e._v(" или "),s("code",[e._v("nightwatch.json")]),e._v(" в корневой каталог проекта для настройки дополнительных браузеров. Конфигурация будет объединена во "),s("a",{attrs:{href:"https://github.com/vuejs/vue-cli/blob/dev/packages/%40vue/cli-plugin-e2e-nightwatch/nightwatch.config.js",target:"_blank",rel:"noopener noreferrer"}},[e._v("внутреннюю конфигурацию Nightwatch"),s("OutboundLink")],1),e._v(".")]),e._v(" "),s("p",[e._v("При необходимости можно полностью заменить внутреннюю конфигурацию собственной с помощью опции "),s("code",[e._v("--config")]),e._v(".")]),e._v(" "),s("p",[e._v("Обратитесь к документации Nightwatch для информации о "),s("a",{attrs:{href:"https://nightwatchjs.org/gettingstarted/configuration/",target:"_blank",rel:"noopener noreferrer"}},[e._v("параметрах конфигурации"),s("OutboundLink")],1),e._v(" и как "),s("a",{attrs:{href:"http://nightwatchjs.org/gettingstarted#browser-drivers-setup",target:"_blank",rel:"noopener noreferrer"}},[e._v("устанавливать драйверы браузеров"),s("OutboundLink")],1),e._v(".")]),e._v(" "),s("h2",{attrs:{id:"запуск-тестов"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#запуск-тестов"}},[e._v("#")]),e._v(" Запуск тестов")]),e._v(" "),s("p",[e._v("По умолчанию, все тесты внутри каталога "),s("code",[e._v("specs")]),e._v(" будут запускаться с использованием Chrome. Если необходимо запустить end-to-end тесты в headless-режиме в Chrome (или Firefox), укажите аргумент "),s("code",[e._v("--headless")]),e._v(".")]),e._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[e._v("$ vue-cli-service test:e2e\n")])])]),s("p",[s("strong",[e._v("Запуск одного теста")])]),e._v(" "),s("p",[e._v("Для запуска одного теста укажите путь к файлу. Например:")]),e._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[e._v("$ vue-cli-service test:e2e tests/e2e/specs/test.js\n")])])]),s("p",[s("strong",[e._v("Пропустить автоматический запуск сервера разработки")])]),e._v(" "),s("p",[e._v("Если сервер разработки уже запущен и необходимо пропустить автоматический запуск, укажите аргумент "),s("code",[e._v("--url")]),e._v(":")]),e._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[e._v("$ vue-cli-service test:e2e --url http://localhost:8080/\n")])])]),s("p",[s("strong",[e._v("Запуск тестов в Firefox")])]),e._v(" "),s("p",[e._v("По умолчанию также поддерживается запуск тестов в Firefox. Выполните следующую команду (опционально можно добавить "),s("code",[e._v("--headless")]),e._v(" для запуска Firefox в безголовом режиме):")]),e._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[e._v("$ vue-cli-service test:e2e --env firefox "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),e._v("--headless"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),e._v("\n")])])]),s("p",[s("strong",[e._v("Запуск тестов в Firefox и Chrome одновременно")])]),e._v(" "),s("p",[e._v('Можно запускать тесты одновременно в обоих браузерах, определяя требуемые тестовые окружения через запятую (",") — не используя пробелы.')]),e._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[e._v("$ vue-cli-service test:e2e --env firefox,chrome "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),e._v("--headless"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),e._v("\n")])])]),s("p",[s("strong",[e._v("Запуск тестов в параллельном режиме")])]),e._v(" "),s("p",[e._v("Для значительного увеличения скорости тестирования можно включить параллельный запуск тестов если имеются в наличии несколько тестовых наборов. Согласование осуществляется на файловом уровне и автоматически распределяется по доступным ядрам процессора.")]),e._v(" "),s("p",[e._v("На данный момент возможность доступна только в Chromedriver. Подробнее о "),s("a",{attrs:{href:"https://nightwatchjs.org/guide/running-tests/#parallel-running",target:"_blank",rel:"noopener noreferrer"}},[e._v("режиме параллельной работы"),s("OutboundLink")],1),e._v(" можно прочитать в документации Nightwatch.")]),e._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[e._v("$ vue-cli-service test:e2e --parallel\n")])])]),s("p",[s("strong",[e._v("Запуск тестов с Selenium")])]),e._v(" "),s("p",[e._v("Поскольку с версии "),s("code",[e._v("v4")]),e._v(" автономный сервер Selenium больше не включён в этот плагин, да и в большинстве случаев работа с Selenium не требуется с версии Nightwatch v1.0.")]),e._v(" "),s("p",[e._v("Но возможность использования сервера Selenium по-прежнему имеется, для этого необходимо выполнить следующие шаги:")]),e._v(" "),s("p",[s("strong",[e._v("1.")]),e._v(" Установите NPM-пакет "),s("code",[e._v("selenium-server")]),e._v(":")]),e._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[e._v("$ "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("npm")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("install")]),e._v(" selenium-server --save-dev\n")])])]),s("p",[s("strong",[e._v("2.")]),e._v(" Запустите команду с аргументом "),s("code",[e._v("--use-selenium")]),e._v(":")]),e._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[e._v("$ vue-cli-service test:e2e --use-selenium\n")])])])])}),[],!1,null,null,null);t.default=r.exports}}]);